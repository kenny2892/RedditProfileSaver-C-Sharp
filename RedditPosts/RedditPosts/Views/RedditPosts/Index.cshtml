@model RedditPosts.ViewModels.RedditViewModel

@{
    ViewData["Title"] = "Upvoted Posts";
}

<h1>Upvoted Posts</h1>

<p>
    <a asp-action="Create">Create New</a> | <button class="night-mode-btn" data-toggle="collapse" data-target="#inputFields">Show Filters</button>
</p>

<div id="inputFields" class="collapse">
    <form asp-controller="RedditPosts" asp-action="Index" method="get">
        <h3>Text Searches</h3>
        @if(Model.IsMobile)
        {
            <p>Title: @Html.TextBoxFor(vm => vm.TitleFilter)</p>
            <p>Author: @Html.TextBoxFor(vm => vm.AuthorFilter)</p>
            <p>Subreddit: @Html.TextBoxFor(vm => vm.SubredditFilter)</p>
        }

        else
        {
            <p>Title: @Html.TextBoxFor(vm => vm.TitleFilter) | Author: @Html.TextBoxFor(vm => vm.AuthorFilter) | Subreddit: @Html.TextBoxFor(vm => vm.SubredditFilter)</p>
        }

        <hr />
        <h3>Toggles</h3>
        @if(Model.IsMobile)
        {
            <p>Saved Only: @Html.CheckBoxFor(vm => vm.SavedOnly) | Randomize: @Html.CheckBoxFor(vm => vm.Randomize)</p>
            <p>Current Seed: @Html.EditorFor(vm => vm.RandomizeSeed)</p>
        }

        else
        {
            <p>Saved Only: @Html.CheckBoxFor(vm => vm.SavedOnly) | Show Hidden: @Html.CheckBoxFor(vm => vm.ShowHidden) | Randomize: @Html.CheckBoxFor(vm => vm.Randomize) | Current Seed: @Html.EditorFor(vm => vm.RandomizeSeed)</p>
        }

        <hr />
        <h3>Dropdowns</h3>
        <p>Nsfw: @Html.DropDownListFor(vm => vm.NsfwSetting, new SelectList(Enum.GetValues(typeof(NsfwSettings))))</p>
        <hr />
        <h3>Content Types</h3>
        <p><button class="night-mode-btn" type="button" id="selectTypesBtn">Select All</button> | <button class="night-mode-btn" type="button" id="deselectTypesBtn">Deselect All</button></p>
        <p>
            @for(int i = 0; i < Model.ContentTypes.Count; i++)
            {
                List<ContentType> types = Enum.GetValues(typeof(ContentType)).Cast<ContentType>().ToList();

                <span>@types[i].ToString()</span>
                <span>:</span>
                <span>@Html.CheckBoxFor(vm => vm.ContentTypes[i], true)</span>

                if(i + 1 < Model.ContentTypes.Count - 1)
                {
                    <span>|</span>
                }
            }
        </p>
        <p><input type="submit" value="Submit" /></p>
    </form>
</div>

<button type="button" id="autoScrollBtn">Auto Scroll</button>
<button onclick="topFunction()" id="topScrollBtn" title="Go to top">Top</button>

<table id="postTable" class="table" style="width:100%">
    <tbody>
    </tbody>
</table>

<h1 id="loadingPosts" style="text-align: center">LOADING POSTS</h1>

@section Scripts
{
    <script src="~/js/RedditPosts.js" asp-append-version="true"></script>

    <script>
        var scrolling = new Scrolling("postTable", "/RedditPosts/_RedditPosts", {vm:@Html.Raw(Json.Serialize(Model)) });
        var contentTypeEnum = @(Utility.EnumToString<ContentType>());
        var selectTypes = new SetSelect(contentTypeEnum);
        var autoScroll = new AutoScrollSetup();
    </script>
}
